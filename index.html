<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Multidbs-vis-server by infsci2711</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Multidbs-Visualization</h1>
        <ul>
          <li class="download"><a class="buttons" href="https://github.com/infsci2711/MultiDBs-Vis-Server/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/infsci2711/MultiDBs-Vis-Server/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/infsci2711/MultiDBs-Vis-Server">View On GitHub</a></li>
        </ul>
        <p class="header">This project is maintained by <a class="header name" href="https://github.com/infsci2711">infsci2711</a></p>
      </header>
      <nav class="nav">
        <a class="padding" href="#" onclick="return show('home','description','api');">Home</a>
        <a class="padding" href="#" onclick="return show('description','home','api');">Description</a>
        <a class="padding" href="#" onclick="return show('api','home','description');">REST API</a>
      </nav>
      <section>
        <h1>
          <a id="multidbs-vis-server" class="anchor" href="#multidbs-vis-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>MultiDBs-Visualization</h1>
          <div id="home">

            <p>In this project, we will visualize the data from the different databases. For the front-end design, we use HTML, CSS, JavaScript and KnocoutJS for the interface design. And we use Java, RESTful API and Hibernate for the back-end design.</p>

            <p>Project page: <a href="http://54.173.71.235/">MultiDBs-Vis</a></p>

            <p>
            	Supervisors: 
            	<br>
            	Al-Khateeb, Shadi (<a href="https://github.com/shadikhateeb">shadikhateeb</a>)
            	<br>
            	Li, Xiaoting (<a href="https://github.com/lxtlouise">lxtlouise</a>)
            </p>
            <p>
            	Members: 
            	<br>
            	Akhtar, Omar (<a href="https://github.com/TSyndrome">TSyndrome</a>)
            	<br>
            	Cao, Qilu (<a href="https://github.com/Luke-pitt">Luke-pitt</a>)
            	<br>
            	Cheng, Yu (<a href="https://github.com/chengyu6419515">chengyu6419515</a>)
				<br>
            	Tong, Kefei (<a href="https://github.com/KieferTowne">KieferTowne</a>)
				<br>
            	Xi, Peng (<a href="https://github.com/rogerxi">rogerxi</a>)
            	<br>
            	Yang, Zhijie (<a href="https://github.com/Miraclekiss">Miraclekiss</a>)
				<br>
            	Zou, Haoda (<a href="https://github.com/zenithda13">zenithda13</a>)
            </p>
          </div>
          <div id="description" style="display:none">
            <h2>Use Cases</h2>
            <p>In our project, users should be able to create and delete canvases. After creating a canvas, they can add stories to it. Here we connect to keyword search group to provide users with keyword search function to search for their target databases. Then based on the databases or tables they add, they could select certain columns and visualize them with Google Chart.</p>
            <p>In order to implement these functions, the work of visualization contains four parts. The first part deals with tables, which stores information about canvases, stories and charts. The second part called DAO is used for connecting databases using Hibernate. The third part is called Manager, which is used for implementing different functions using Hibernate, such as adding canvases. The last part is Java classes, which call different functions to accomplish our goals.</p>


            <h2>Requirements and Installation</h2>
            <p>To build our project, you will need to install Maven and git on Linux like server. Here are the commands that you need to type in the terminal at the very first beginning:</p>
            <h3>1. Install the essentials</h3>
            First of all, you need to update the apt-get:<br>
            <code> 
			sudo apt-get update<br>
			</code>
            <code> 
			sudo apt-get install git<br>
			sudo apt-get install maven<br>
			sudo apt-get install openjdk-7-jdk<br>
			sudo apt-get install nginx<br>
			sudo apt-get install docker<br>
			sudo apt-get install mysql-server<br>
			</code>
			<br>
			During the process of installing mysql-server, there would be a pop up window that remind you to set up the intial password. The default username is root, so just pick a password for that. 
			<h3>2. Set up mysql: </h3>
			Type the following command to login to your mysql:<br>
			<code> 
			mysql -uroot -pYourpassword<br>
			</code>
			<br>
			Here "Yourpassword" is the password that you just set for root.<br>
			Then run the following commands:<br>
			<code> 
			CREATE USER 'dataverse'@'%' IDENTIFIED BY 'dataverse';<br>
			GRANT ALL PRIVILEGES ON *.* TO 'dataverse'@'%' WITH GRANT OPTION;<br>
			CREATE DATABASE visualization;<br>
			exit<br>
			</code>
			<br>
			<h3>3. Create folders:</h3>
			Type the following commands to create the project folder:<br>
			<code> 
			cd /opt<br>
			sudo mkdir project<br>
			cd project<br>
			</code>
			<br>
			<h3>4. Clone the repositories: </h3>
			Type the following commands to clone<br>
			<code> 
			sudo git clone https://github.com/infsci2711/MultiDBs-Vis-Server.git<br>
			sudo git clone https://github.com/Luke-pitt/ColFusionDockerUtils.git<br>
			sudo git clone https://github.com/ColFusion/ColFusionUtils.git<br>
			sudo git clone https://github.com/infsci2711/MultiDBs-Utils.git<br>
			sudo git clone https://github.com/infsci2711/MultiDBs-Vis-WebClient.git<br>
			</code>
			<br>
			<h3>5. Serve with nginx:</h3>
			<code> 
			cd /usr/share/nginx<br>
			sudo rm -R html<br>
			sudo ln -sv /opt/project/MultiDBs-Vis-WebClient html<br>
			</code>
			<br>
			<h3>6. Import the SQL file:</h3>
			Type the following to import the SQL file: <br>
			<code>
			mysql -udataverse -pdataverse visualization < /opt/project/MultiDBs-Vis-Server/visualization2.sql<br>
			</code>
			<br>
			<h3>7. Change config.properties</h3>
			Go to /opt/project/MultiDBs-Vis-Server/MultidbsVisServerAPI/src/main/resources/config.properties, and change the IP address with the new one, respectively.<br>
			<h3>8. Maven install: </h3>
			Maven install each of the projects:<br>
			<code>
			cd /opt/project/MultiDBs-Utils<br>
			sudo mvn install<br>
			cd /opt/project/ColFusionUtils<br>
			sudo mvn install<br>
			cd /opt/project/ColFusionDockerUtils<br>
			sudo mvn install<br>
			cd /opt/project/MultiDBs-Vis-Server<br>
			sudo mvn install<br>
			</code>
			<br>
			<h3>9. Change the restBaseUrl to point to the server IP</h3>
			Go to /opt/project/MultiDBs-Vis-WebClient/newJs/newDashBoard.js, and change the IP address with the new one, respectively.<br>
			<h3>10. Run setup.sh:</h3>
			Type the following for maven install and start the server:<br>
			<code> 
			cd /opt/project/MultiDBs-Vis-Server/MultidbsVisServerAPI/target/<br>
			sh setup.sh<br>
			</code>
			<br>
			At this time you are supposed to finish all the installation and start the server already.<br>
			<h3>11. Stop the server</h3>
			If you want stop the server, run the following commands:<br>
			<code> 
			cd /opt/project/MultiDBs-Vis-Server/<br>
			sh stopserver.sh<br>
			</code>


			<h2>Work with other MultiDBs projects</h2>
            <p>The following figure describes how our project work with other MultiDBs projects:</p>
            <img src="images/Structure.png" />
            <p>After creating a canvas, it will be stored in our local database. Then we will add story to the canvas, we need to connect to the keyword search, sending then the keyword of our target database, and they will return us the database id, database name, and table name. At this time, the story will also be added to our visualization local database. Then we open the story and starting creating the charts. We send the request for columns to Metastore and they will return us with column names, thus enable us to select the columns that we want to visualize. After we specify the columns, we send a SQL query in JSON format to PrestoDB, and the will send us the data, also in JSON as return. Then the chart will also be stored in our local database and shown on the page.</p>
          </div>
          <div id="api" style="display:none">
            <p>In our project, we use RESTful API which is identified by URIs. Here is the tutorial website: <a href="http://www.restapitutorial.com/">http://www.restapitutorial.com/</a></p>
            <p>There are mainly three parts of the API services, which are Canvas, Story and chart, and we will describe each of them one by one. </p>
            <p>
            	Canvas:
            	<ul>Create new canvas in the database:
            		<li>Path: "localhost:7654/Visualization/canvas/new/{userId}/{name}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: canvas name</li>
            		<li>Output parameter: {"cdate": "2015-04-12T17:54:46.335","mdate": "2015-04-12T17:54:46.335","name": "test1","privilege": 0,"user": {"canvasSet": [],"userId": 1,"userNames": "user1"},"vid": 10}
					</li>
            	</ul>
            	<ul>Find all the canvases created by the user with provided user Id:
            		<li>Path: "localhost:7654/Visualization/canvas/user/{userId: [0-9]+}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: userId</li>
            		<li>Output parameter: [{"cdate":"2015-04-12T17:54:46","mdate":"2015-04-12T17:54:46","name":"test1","privilege":0,"user":{"canvasSet":[],"userId":1,"userNames":"user1"},"vid":10},{"cdate":"2015-04-12T17:56:09","mdate":"2015-04-12T17:56:09","name":"test2","privilege":0,"user":{"canvasSet":[],"userId":1,"userNames":"user1"},"vid":11}]
					</li>
            	</ul>
            	<ul>Delete metadata for the canvas with provided canvas Id:
            		<li>Path: "localhost:7654/Visualization/canvas/delete/{vid}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: vid</li>
            		<li>Output parameter: S(Success)/F(Fail)</li>
            	</ul>
            </p>
            <p>
            	Story:
            	<ul>Add new story in the database:
            		<li>Path: "localhost:7654/Visualization/story/new/{did}/{dname}/{tname}/{vid}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: key word</li>
            		<li>Output parameter: [{"canvasVM": {"cdate": "2015-04-12T17:56:09","mdate": "2015-04-12T17:56:09","name": "test2","privilege": 0,"user": {"canvasSet": [],"userId": 1,"userNames": "user1"},"vid": 11},"chartVMSet": [],"did": "1","dname": "car","tname": "test"}]
					</li>
            	</ul>
            	<ul>Show all the stories in a specific canvas:
            		<li>Path: "localhost:7654/Visualization/story/showAll/{vid}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: vid</li>
            		<li>Output parameter: [{"canvasVM":{"cdate":"2015-04-12T17:56:09","mdate":"2015-04-12T17:56:09","name":"test2","privilege":0,"user":{"canvasSet":[],"userId":1,"userNames":"user1"},"vid":11},"chartVMSet":[],"did":"1","dname":"car","tname":"test"}]
					</li>
            	</ul>
            	<ul>Delete metadata for the story with provided story Id:
            		<li>Path: "localhost:7654/Visualization/story/delete/{sid}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: sid</li>
            		<li>Output parameter: S(Success)/F(Fail)</li>
            	</ul>
            </p>
            <p>
            	Chart:
            	<ul>Create a new chart with provided canvas Id, chart name and chart type:
            		<li>Path: "localhost:7654/Visualization/chart/new/{sid}/{type}/{did}/{dname}/{tname}/{columns}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: sid, type, did, dname, tname, columns</li>
            		<li>Output parameter: ["cid":1,"columns":"population","did":"1",
										   "dname":"city","storyVM":{"canvasVM":{"cdate":"2015-04-12T17:56:09","mdate":"2015-04-12T17:56:09","name":"test2","privilege":0,"user":{"canvasSet":[],"userId":1,"userNames":"user1"},"vid":11},"chartVMSet":[],"did":"1","dname":"city","tname":"Pittsburgh"},"tname":"Pittsburgh","type":"pie"}]
					</li>
            	</ul>
				<ul>Show all the charts in a specific story:
            		<li>Path: "localhost:7654/Visualization/chart/showAll/{sid}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: sid</li>
            		<li>Output parameter: [{"cid":1,"columns":"population","did":"1",
											"dname":"city","storyVM":{"canvasVM":{"cdate":"2015-04-12T17:56:09","mdate":"2015-04-12T17:56:09","name":"test2","privilege":0,"user":{"canvasSet":[],"userId":1,"userNames":"user1"},"vid":11},"chartVMSet":[],"did":"1","dname":"city","tname":"Pittsburgh"},"tname":"Pittsburgh","type":"pie"}]
					</li>
            	</ul>
            	<ul>Delete chart with provided chart Id:
            		<li>Path: "localhost:7654/Visualization/chart/delete/{cid}"</li>
            		<li>Method: GET</li>
            		<li>Input parameter: cid</li>
            		<li>Output parameter: S(Success)/F(Fail)</li>
            	</ul>
            </p>
          </div>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
  </body>
</html>
